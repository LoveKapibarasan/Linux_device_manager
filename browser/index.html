<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Simple Electron Browser</title>
  <style>
    body { margin: 0; font-family: sans-serif; }
    #controls {
      display: flex; align-items: center;
      padding: 5px; background: #ddd; height: 50px;
    }
    #tabs { margin-right: 10px; }
    #tabs button { margin-right: 5px; }
    #address { flex: 1; padding: 5px; }
    #controls button { margin-left: 5px; }
  </style>
</head>
<body>
  <div id="controls">
    <div id="tabs"></div>
    <button id="back">←</button>
    <button id="forward">→</button>
    <input id="address" type="text" value="https://google.com">
    <button id="go">Go</button>
    <button id="newTab">＋</button>
  </div>

  <script>
    const { electronAPI } = window;

    const address = document.getElementById("address");
    const goBtn = document.getElementById("go");
    const backBtn = document.getElementById("back");
    const forwardBtn = document.getElementById("forward");
    const newTabBtn = document.getElementById("newTab");
    const tabsDiv = document.getElementById("tabs");

    let currentIndex = 0;

    goBtn.addEventListener("click", () => {
      electronAPI.navigate(address.value);
    });
    backBtn.addEventListener("click", () => electronAPI.back());
    forwardBtn.addEventListener("click", () => electronAPI.forward());
    newTabBtn.addEventListener("click", () => electronAPI.newTab("https://google.com"));

    electronAPI.onUpdateURL(({ url, index }) => {
      address.value = url;
      currentIndex = index;
      renderTabs(index);
    });

    function renderTabs(activeIndex) {
      tabsDiv.innerHTML = "";
      for (let i = 0; i <= activeIndex; i++) {
        const btn = document.createElement("button");
        btn.textContent = `Tab ${i + 1}`;
        if (i === activeIndex) btn.style.fontWeight = "bold";
        btn.addEventListener("click", () => electronAPI.switchTab(i));
        tabsDiv.appendChild(btn);
      }
    }
  </script>
</body>
</html>
